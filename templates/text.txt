<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#0b1220">




<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js")
    .then(() => console.log("PWA ready"))
    .catch(err => console.error("SW error", err));
}
</script>




<button id="installBtn" class="floatBtn" style="top:320px;display:none;">
  Install App
</button>




let deferredPrompt;
const installBtn = document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt", e => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "block";

  // Analytics
  gtag('event', 'pwa_install_prompt_shown');
});

installBtn.onclick = async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  const result = await deferredPrompt.userChoice;

  if (result.outcome === "accepted") {
    gtag('event', 'pwa_installed');
  }

  deferredPrompt = null;
  installBtn.style.display = "none";
};






Tracking button✅✅✅

<button class="popup-btn"
  onclick="trackBuilding('Navigate','${b.name}'); navigateFromPopup(${b.latitude},${b.longitude})">
  Navigate
</button>



function trackBuilding(action, buildingName) {
  gtag('event', 'building_action', {
    action_type: action,
    building: buildingName
  });
}
